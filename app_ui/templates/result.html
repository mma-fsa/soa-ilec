{% extends "layout.html" %}
{% block title %}Results · ILEC{% endblock %}

{% block content %}
  <div class="row">
    <div class="col-12">
      {% if error %}
        <div class="alert alert-danger" role="alert">
          <strong>Error:</strong> {{ error }}
        </div>
      {% else %}
        <div class="d-flex align-items-center gap-3 mb-3">
          <h1 class="h4 m-0">Query Results</h1>
          {% if elapsed_s is not none %}
            <span class="badge bg-secondary">Elapsed {{ "%.3f"|format(elapsed_s) }}s</span>
          {% endif %}
          {% if truncated %}
            <span class="badge bg-warning text-dark">Truncated</span>
          {% endif %}
        </div>

        {% if columns and rows %}
          <div class="table-responsive">
            <table class="table table-sm table-striped align-middle">
              <thead class="table-light">
                <tr>
                  {% for c in columns %}
                    <th scope="col">{{ c }}</th>
                  {% endfor %}
                </tr>
              </thead>
              <tbody>
                {% for r in rows %}
                  <tr>
                    {% for cell in r %}
                      <td>{{ cell }}</td>
                    {% endfor %}
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        {% else %}
          <div class="alert alert-info">No rows returned.</div>
        {% endif %}
      {% endif %}

      <a class="btn btn-outline-primary mt-3" href="/">← Back</a>
    </div>
  </div>
{% endblock %}
